# @package _global_

defaults:
  - base
  - override /model: option_retriever
  - override /datamodule/builder: concat_openqa
base:
  seed: null
  target_metric: validation/reader/logp
  target_mode: max

trainer:
  gpus: 8
  strategy: dp
  min_epochs: 1
  max_epochs: 1000
  accumulate_grad_batches: 4
  val_check_interval: 200

datamodule:
  use_subset: false
  train_batch_size: 8
  eval_batch_size: 128
  num_workers: 16
  builder:
    batch_size: 20
  n_documents:
    train: 12
    validation: 12
    test: 12
  max_pos_docs: 3
  filter_unmatched: False
  output_columns:
    - question.input_ids
    - question.attention_mask
    - document.input_ids
    - document.attention_mask
    - document.row_idx
    - document.match_score
    - document.retrieval_score
    - answer.target

logger:
  wandb:
    group: option-retriever
