# @package _global_

defaults:
  - gen_openqa
  - override /model/module/gradients: language_modelling
  - override /datamodule/dataset_update: no_update

setup_with_model: true

base:
  batch_size: 32
  device_batch_size: 1
  eval_device_batch_size: 2
  target_mode: min
  target_metric: validation/loss

model:
  retriever_id: findzebra/vod-retriever-medical-v1.0
  module:
    skip_retriever: true
  optimizer:
    lr: 5e-5
    weight_decay: 1e-3
    eps: 1e-8
  lr_scheduler:
    num_warmup_steps: 10_000
    num_training_steps: 1_000_000 # constant learning rate

datamodule:
  n_documents: 4
  concat_qa: false
  es_weight: 0

logger:
  wandb:
    group: gen-openqa-${datamodule.dset_name}
    name: ${base.exp_id}
